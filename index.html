<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Manual de instalação do CAU by gabrielamayoli</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Manual de instalação do CAU</h1>
        <p></p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/gabrielamayoli/CAU" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/gabrielamayoli/CAU/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/gabrielamayoli/CAU/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h2>
<a name="1---licen%C3%A7a-deste-documento" class="anchor" href="#1---licen%C3%A7a-deste-documento"><span class="octicon octicon-link"></span></a>1 - Licença deste Documento</h2>

<p>Para a utilização deste documento é necessário seguir as regras da licença Creative Commons pela mesma Licença 2.5 Brasil.</p>

<p>Você tem a liberdade de:</p>

<p><img src="https://raw.github.com/gabrielamayoli/CAU/master/imagens/1.png" alt="">  <b>Compartilhar</b> — copiar, distribuir e transmitir a obra.</p>

<p><img src="https://raw.github.com/gabrielamayoli/CAU/master/imagens/2.png" alt="">  <b>Remixar</b> — criar obras derivadas.</p>

<p>Sob as seguintes condições:</p>

<p><img src="https://raw.github.com/gabrielamayoli/CAU/master/imagens/3.png" alt="">  <b>Atribuição</b> — Você deve creditar a obra da forma especificada pelo autor ou licenciante (mas não de maneira que sugira que estes concedem qualquer aval a você ou ao seu uso da obra).</p>

<p><img src="https://raw.github.com/gabrielamayoli/CAU/master/imagens/4.png" alt="">  <b>Compartilhamento pela mesma licença</b> — Se você alterar, transformar ou criar em cima desta obra, você poderá distribuir a obra resultante apenas sob a mesma licença, ou sob uma licença similar à presente.</p>

<p>Ficando claro que: <b>Renúncia</b> — Qualquer das condições acima pode ser <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/br/deed.pt_BR#">renunciada</a> se você obtiver permissão do titular dos direitos autorais. 
<b>Domínio Público</b> — Onde a obra ou qualquer de seus elementos estiver em <a href="http://wiki.creativecommons.org/Public_domain">domínio público</a> sob o direito aplicável, esta condição não é, de maneira alguma, afetada pela licença. 
<b>Outros Direitos</b> — Os seguintes direitos não são, de maneira alguma, afetados pela licença: 
Limitações e exceções aos direitos autorais ou quaisquer <a href="http://wiki.creativecommons.org/Frequently_Asked_Questions#Do_Creative_Commons_licenses_affect_fair_use.2C_fair_dealing_or_other_exceptions_to_copyright.3F">usos livres</a> aplicáveis; 
Os <a href="http://wiki.creativecommons.org/Frequently_Asked_Questions#I_don.E2.80.99t_like_the_way_a_person_has_used_my_work_in_a_derivative_work_or_included_it_in_a_collective_work.3B_what_can_I_do.3F">direitos morais</a> do autor; 
Direitos que outras pessoas podem ter sobre a obra ou sobre a utilização da obra, tais como <a href="http://wiki.creativecommons.org/Frequently_Asked_Questions#When_are_publicity_rights_relevant.3F">direitos de imagem</a> ou privacidade. 
<b>Aviso</b> — Para qualquer reutilização ou distribuição, você deve deixar claro a terceiros os termos da licença a que se encontra submetida esta obra. A melhor maneira de fazer isso é com um link para esta página. </p>

<h2>
<a name="2---introdu%C3%A7%C3%A3o-ao-sistema-cau" class="anchor" href="#2---introdu%C3%A7%C3%A3o-ao-sistema-cau"><span class="octicon octicon-link"></span></a>2 - Introdução ao Sistema CAU</h2>

<p>A instalação do Sistema CAU é um processo bastante simples. O sistema possui duas interfaces de interação: cau e gestaoti. A interface cau é destinada a abertura e acompanhamento de chamados pelos usuários demandantes, já a interface gestaoti é destinada ao atendimento e gerenciamento das demandas e todas as atividades de configuração do sistema. Por este motivo, neste manual várias vezes nos referimos ao termo <b>gestaoti</b> ao invés do nome do sistema – <b>cau</b>. Neste manual utilizaremos o termo <b>sisgestaoti</b> para referenciar a raiz da aplicação, caso queira você pode utilizar outro. </p>

<h2>
<a name="21---caracter%C3%ADsticas-e-principais-funcionalidades" class="anchor" href="#21---caracter%C3%ADsticas-e-principais-funcionalidades"><span class="octicon octicon-link"></span></a>2.1 - Características e principais funcionalidades</h2>

<p>O código fonte (que é livre e aberto) está disponível para ser baixado livremente no Portal do SPB e sua implementação é em PHP, tendo como camada de armazenamento o sistema gerenciador de banco de dados PostgreSQL. </p>

<p>O sistema possui várias funcionalidades entre as quais destacam-se: </p>

<ul>
<li>
<p>Gestão de Ativos de TI</p>

<ul>
<li>Sistemas de Informação;</li>
<li>Servidores;</li>
<li>Patrimônio;</li>
<li>Análise de impacto (Gestão de Configuração);</li>
</ul>
</li>
<li>
<p>Gestão de Profissionais de TI e Clientes</p>

<ul>
<li>Cadastro dos profissionais de TI;</li>
<li>Cadastro de equipes;</li>
<li>Time sheet;</li>
<li>Cadastro dos clientes;</li>
</ul>
</li>
<li>
<p>Gestão de Chamados a TI</p>

<ul>
<li>Gestão de requisições de serviço;</li>
<li>Gestão de incidentes;</li>
<li>Gestão de problemas;</li>
<li>Gestão de níveis de serviços;</li>
</ul>
</li>
<li>
<p>Gestão de Mudanças</p>

<ul>
<li>Relatórios de Apoio a Decisão;</li>
</ul>
</li>
</ul><h2>
<a name="3---instala%C3%A7%C3%A3o-do-sistema" class="anchor" href="#3---instala%C3%A7%C3%A3o-do-sistema"><span class="octicon octicon-link"></span></a>3 - Instalação do Sistema</h2>

<h2>
<a name="31---requisitos-gerais-para-instala%C3%A7%C3%A3o" class="anchor" href="#31---requisitos-gerais-para-instala%C3%A7%C3%A3o"><span class="octicon octicon-link"></span></a>3.1 - Requisitos gerais para instalação</h2>

<p>Sugerimos que este guia seja executado por um usuário com experiência em configuração básica de Apache, PHP e PostgreSQL.<br>
Este roteiro está baseado no Sistema Operacional GNU/Linux Debian Lenny.<br>
Este manual pressupõe que o servidor de aplicação Web e o banco de dados estarão instalados no mesmo servidor.</p>

<h2>
<a name="32---pr%C3%A9-requisitos-de-software" class="anchor" href="#32---pr%C3%A9-requisitos-de-software"><span class="octicon octicon-link"></span></a>3.2 - Pré-requisitos de Software</h2>

<p>Os requisitos mínimos de software para a correta instalação do Sistema CAU são:</p>

<ul>
<li>PHP 5.x

<ul>
<li>php5-gd</li>
<li>php5-pgsql</li>
</ul>
</li>
<li>Servidor Web Apache </li>
<li>PostgreSQL 8.3 ou superior</li>
</ul><h2>
<a name="4---passo-a-passo-da-instala%C3%A7%C3%A3o-no-sistema-operacional-linux" class="anchor" href="#4---passo-a-passo-da-instala%C3%A7%C3%A3o-no-sistema-operacional-linux"><span class="octicon octicon-link"></span></a>4 - Passo-a-passo da Instalação no Sistema Operacional Linux</h2>

<h2>
<a name="41---instalando-apache-php5-e-postgresql" class="anchor" href="#41---instalando-apache-php5-e-postgresql"><span class="octicon octicon-link"></span></a>4.1 - Instalando Apache, PHP5 e PostgreSQL</h2>

<pre><code>$ apt-get install apache2
$ apt-get install postgresql-8.4
$ apt-get install php5 libapache2-mod-php5 php5-gd php5-pgsql
</code></pre>

<h2>
<a name="42---download-do-software" class="anchor" href="#42---download-do-software"><span class="octicon octicon-link"></span></a>4.2 - Download do software</h2>

<p>Faça o download dos arquivos do sistema antes de prosseguir. A versão atual, <a href="http://www.softwarepublico.gov.br/dotlrn/clubs/ieducar/file-storage/index?folder_id=18853558">1.0</a>, está disponível em pacotes ZIP e GZip. Descompacte o pacote de sua preferência no diretório raiz do seu servidor web Apache (no Debian, geralmente o diretório raiz é <i>/var/www</i>). </p>

<pre><code>$ cd /var/www
$ unzip /caminho/cau-1.0.zip
$ mv cau-1.0  sisgestaoti
</code></pre>

<h2>
<a name="43---cria%C3%A7%C3%A3o-do-banco-de-dados" class="anchor" href="#43---cria%C3%A7%C3%A3o-do-banco-de-dados"><span class="octicon octicon-link"></span></a>4.3 - Criação do Banco de Dados</h2>

<p>Crie o banco de dados ao qual o CAU usará para armazenar todos os dados digitados através da interface web. Os passos descritos nessa seção irão criar:</p>

<p>*Um usuário <b>gestaoti</b> no servidor PostgreSQL com a senha de acesso <b>'gestaoti'</b>; 
   *Um banco de dados <b>gestaoti</b>.</p>

<p><b>Observação:</b> você pode usar o nome de usuário, banco de dados e senha que desejar. Esses são apenas nomes padrões que a aplicação usa para conectar-se ao banco. 
Faça login no servidor de banco de dados PostgreSQL com o cliente <i>psql</i>: </p>

<pre><code>$ su
# su - postgres
# psql
</code></pre>

<p>Alternativamente, com o sudo: </p>

<pre><code>$ sudo -u postgres psql
</code></pre>

<p>Crie o usuário de banco de dados que será utilizado pelo CAU: </p>

<pre><code>postgres=# CREATE ROLE gestaoti;
postgres=# ALTER ROLE gestaoti WITH SUPERUSER INHERIT NOCREATEROLE      CREATEDB LOGIN PASSWORD 'gestaoti';
</code></pre>

<p>Crie o banco de dados: </p>

<pre><code>postgres=# CREATE DATABASE gestaoti WITH TEMPLATE = template0 ENCODING = 'UTF8' LC_COLLATE = 'pt_BR.utf8' LC_CTYPE = 'pt_BR.utf8'; 
postgres=# ALTER DATABASE gestaoti OWNER TO gestaoti;
postgres=# \q
</code></pre>

<p>Execute o arquivo <i>script_gestaoti.sql</i> que vem no cau. O diretório em que esse arquivo reside é o <i>install</i>. </p>

<pre><code>$ sudo -u postgres psql -d gestaoti -f /var/www/sisgestaoti/install/script_gestaoti.sql
</code></pre>

<p><b><i>Edite o arquivo de configuração e conceda permissões de escrita</i></b></p>

<p>O CAU armazena algumas configurações necessárias para a aplicação em um arquivo chamado <b>gestaoti_configs.inc.php</b> (em <i>/var/www/sisgestaoti/gestaoti/</i>), que possui uma sintaxe bem simples de entender. Caso tenha criado o banco de dados, nome de usuário ou senha com um valor diferente de <b>gestaoti</b>, basta editar esse arquivo para que corresponda as suas escolhas: </p>

<pre><code>$gestaoti_settings['db_postgres_host']='localhost'; 
$gestaoti_settings['db_postgres_port']='5432'; 
$gestaoti_settings['db_postgres_name']='gestaoti'; 
$gestaoti_settings['db_postgres_user']='gestaoti'; 
$gestaoti_settings['db_postgres_pass']='gestaoti'; 
$gestaoti_settings['db_postgres_enconding']='LATIN1';
</code></pre>

<p>Depois, conceda permissões de escrita no diretório cau/anexos. Uma forma prática é dar permissão de escrita para o usuário dono do diretório e para usuários de um grupo. Nesse caso, mudaremos o grupo desses diretórios para o grupo do usuário Apache. </p>

<pre><code># chmod -R 775 /var/www/sisgestaoti/cau/anexos
# chown -R www-data.www-data /var/www/sisgestaoti/
</code></pre>

<p><b>Observação:</b> <i>www-data</i> é o nome do grupo Apache padrão em sistemas Debian. Em outros sistemas, esse nome pode ser <i>httpd</i>, apache ou <i>_www</i>. Substitua de acordo com o usado em seu sistema operacional. </p>

<p><b><i>Edite o arquivo de configuração da biblioteca JpGraph</i></b></p>

<p>Configure o diretório onde estão instaladas as fontes. Edite o arquivo <b>jpg-config.inc.php</b> em <i>/var/www/sisgestaoti/gestaoti/include/PHP/class</i>. Por padrão o sistema CAU utiliza a fonte <i>arial.ttf</i> basta incluí-la no diretório abaixo (no caso para sistemas Debian). Esta fonte está incluída no pacote <i>ttf-mscorefonts-installer</i> da distribuição Debian Lenny.</p>

<pre><code>DEFINE("TTF_DIR","/usr/X11R6/lib/X11/fonts/truetype/");
</code></pre>

<h2>
<a name="44---configurando-o-php" class="anchor" href="#44---configurando-o-php"><span class="octicon octicon-link"></span></a>4.4 - Configurando o PHP</h2>

<p>Edite o arquivo <b><i>php.ini</i></b> da seguinte forma: </p>

<pre><code>register_globals: altere para On
register_globals = on
</code></pre>

<p>Para instalações nos sistemas operacionais windows* os usuários reportaram  também a necessidade de alterar a direita <i>short_open_tag</i>, mudar de “Off” para:
    short_open_tag = on</p>

<p><b>Observação:</b> a localização do arquivo <i>php.ini</i> é diferente entre os sistemas operacionais. No Debian/Ubuntu, o padrão é <i>/etc/php5/apache2/php.ini</i>. 
Após qualquer alteração no arquivo <i>php.ini</i>, reinicie seu servidor web: 
    # /etc/init.d/apache2 restart</p>

<h2>
<a name="44---configura%C3%A7%C3%A3o-do-servidor-web--passo-opcional" class="anchor" href="#44---configura%C3%A7%C3%A3o-do-servidor-web--passo-opcional"><span class="octicon octicon-link"></span></a>4.4 - Configuração do Servidor Web – (Passo Opcional)</h2>

<p>Agora criaremos um virtual host no servidor. Crie um novo arquivo em <i>/etc/apache2/sites-available/</i> chamado <i>sisgestaoti.local</i> com o seguinte conteúdo:</p>

<pre><code>&lt;VirtualHost *:80&gt;
 ServerName sisgestaoti.local
 DocumentRoot /var/www/sisgestaoti/

 &lt;Directory /var/www/sisgestaoti&gt;
    AllowOverride all
    Order deny,allow
    Allow from all
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>

<p>Edite o arquivo <i>/etc/hosts</i> (no Windows esse arquivo fica em <i>C:\WINDOWS\system32\drivers\etc\hosts</i>) e adicione a seguinte linha: </p>

<pre><code>127.0.0.1      sisgestaoti.local
</code></pre>

<p>Habilite o Virtual Host: </p>

<pre><code># a2ensite sisgestaoti.local
</code></pre>

<p>Reinicie o servidor Apache: </p>

<pre><code># /etc/init.d/apache2 restart
</code></pre>

<p>Pronto. Agora, acesse o endereço <a href="http://ieducar.local/">http://sisgestaoti.local</a> em seu navegador. </p>

<h2>
<a name="5---acessando--a-aplica%C3%A7%C3%A3o" class="anchor" href="#5---acessando--a-aplica%C3%A7%C3%A3o"><span class="octicon octicon-link"></span></a>5 - Acessando  a aplicação</h2>

<p>Abra o navegador de sua preferência e acesse o endereço  <a href="http://localhost/ieducar">http://localhost/sisgestaoti</a> ou  <a href="http://ieducar.local/">http://sisgestaoti.local</a> (caso tenha configurado um Virtual Host). Faça o login na aplicação utilizando o usuário administrador. O login e senha para acesso são <b>admin</b> e <b>admin</b>, respectivamente. </p>

<p><b>Link da Licença Júridica Creative Commons</b><br><i><a href="http://creativecommons.org/licenses/by-sa/2.5/br/legalcode">http://creativecommons.org/licenses/by-sa/2.5/br/legalcode</a></i></p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/gabrielamayoli">gabrielamayoli</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>